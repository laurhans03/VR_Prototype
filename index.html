<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Mein VR-Prototyp</title>

    <!-- Load the A-Frame framework for building WebVR scenes -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-html-shader@1.3.0/dist/aframe-html-shader.min.js"></script>
</head>

<body>
    <!-- Display a loading message before the scene is fully initialized -->
    <div id="loading">Loading scene...</div>

     <div id="ytplayer" style="display: none">
        <iframe width="560" height="315"
        src="https://www.youtube.com/embed/0-AWUOTDqUA&list=PLzLMJhbRWJRcieeDSbWlrc66eZi6hFRuF?autoplay=1&mute=1&loop=1&playlist=YOUTUBE_ID"
        frameborder="0" allowfullscreen>
        </iframe>
    </div>


    <!-- Main VR scene container -->
    <a-scene>

        <!-- Video assets -->
        <!-- <a-assets>
            <video id="video1" src="video/room1.mp4" autoplay loop muted playsinline crossorigin="anonymous"></video>
            <video id="video2" src="video/room2.mp4" autoplay loop muted playsinline crossorigin="anonymous"></video>
        </a-assets> -->

        <!-- Room 1 -->
        <a-entity id="room1" visible="true">
            <!-- <a-videosphere src="#video1" rotation="0 0 0"></a-videosphere> -->
            <a-entity geometry="primitive: plane; height: 3; width: 5"
                material="shader: html; target: #ytplayer"
                position="0 2 -4">
            </a-entity>

         
            <!-- Video-Entry (Icon + Text) -->
            <a-entity id="toRoom2" class="clickable" position="0 1.5 -2">
            
            <!-- Symbol/Icon -->
            <a-image
                src="https://cdn.jsdelivr.net/gh/feathericons/feather@main/icons/video.svg"
                position="0 0 0"
                width="0.4"
                height="0.4"
                material="color: white; opacity: 0.9">
            </a-image>

            <!-- Text darunter -->
            <a-text
                value="Mein Video"
                align="center"
                position="0 -0.35 0"
                width="2"
                color="white">
            </a-text>

            </a-entity>

        </a-entity>

        <!-- Room 2 (initially hidden) -->
        <a-entity id="room2" visible="false">
            <!-- <a-videosphere src="#video2" rotation="0 0 0"></a-videosphere> -->
        </a-entity>

        <!-- Define the user's camera and enable head movement tracking -->
        <a-entity camera look-controls position="0 1.3 0" raycaster="objects: .clickable">
            <a-entity id="cursorBase" cursor="fuse: true; fuseTimeout: 2000" position="0 0 -0.5"
                geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                material="color: transparent; shader: flat">
            </a-entity>

            <a-ring id="progressRing" radius-inner="0.011" radius-outer="0.02" position="0 0 -0.5" color="#FFD700"
                theta-start="0" theta-length="0">
            </a-ring>

        </a-entity>

        <!-- Enable hand tracking for left and right hands -->
        <a-entity id="leftHand" hand-tracking-controls="hand: left"></a-entity>
        <a-entity id="rightHand" hand-tracking-controls="hand: right"></a-entity>


        <!-- Display a welcome message floating in front of the user -->
        <a-text value="Welcome" align="center" position="0 1.8 -2" color="#ffffff" width="3"></a-text>
    </a-scene>

     <script>
    const button = document.querySelector('#toRoom2');
    const room1 = document.querySelector('#room1');
    const room2 = document.querySelector('#room2');
    const progressRing = document.querySelector('#progressRing');

    button.addEventListener('mouseenter', () => {
      progressRing.removeAttribute('animation');
      progressRing.setAttribute('animation', {
        property: 'theta-length',
        from: 0,
        to: 360,
        dur: 2000,
        easing: 'linear'
      });
    });

    button.addEventListener('mouseleave', () => {
      progressRing.removeAttribute('animation');
      progressRing.setAttribute('theta-length', 0);
    });

    button.addEventListener('click', () => {
      room1.setAttribute('visible', 'false');
      room2.setAttribute('visible', 'true');
      progressRing.removeAttribute('animation');
      progressRing.setAttribute('theta-length', 0);
    });
  </script>

    
    <!-- <script>
        // Videos sicher starten
        window.onload = () => {
            document.querySelector('#video1').play();
            document.querySelector('#video2').play();
        };

        // const cursor = document.querySelector('#cursorRing');
        const button = document.querySelector('#toRoom2');
        const room1 = document.querySelector('#room1');
        const room2 = document.querySelector('#room2');
        const progressRing = document.querySelector('#progressRing');

        button.addEventListener('mouseenter', () => {
            progressRing.removeAttribute('animation'); // Reset vorheriger Animationszustand
            progressRing.setAttribute('animation', {
                property: 'theta-length',
                from: 0,
                to: 360,
                dur: 2000,
                easing: 'linear'
            });
        });

        // Fortschritt abbrechen, wenn der Blick weggeht
        button.addEventListener('mouseleave', () => {
            progressRing.removeAttribute('animation');
            progressRing.setAttribute('theta-length', 0);
        });

        // Nach 2 Sekunden (fuseTimeout) — Klick → Szene wechseln
        button.addEventListener('click', () => {
            room1.setAttribute('visible', 'false');
            room2.setAttribute('visible', 'true');
            progressRing.removeAttribute('animation');
            progressRing.setAttribute('theta-length', 0);
        });

    </script> -->


</body>

</html>